
location /auth/api/is-authorized/ {
    # Internal indicates that the matching location can be used
    # only for so called "internal" requests.
    internal;
    include uwsgi_params;
    uwsgi_modifier1 30;
    uwsgi_pass $wwwhisper_site_socket;
    uwsgi_param REQUEST_METHOD GET;
    uwsgi_param QUERY_STRING path=$request_uri;
    uwsgi_param REQUEST_URI $document_uri?path=$request_uri;
    uwsgi_pass_request_body off;
    uwsgi_param CONTENT_LENGTH 0;
}

location /auth/api {
    uwsgi_pass $wwwhisper_site_socket;
    uwsgi_modifier1 30;
    include uwsgi_params;
    add_header X-Frame-Options SAMEORIGIN;
    add_header X-Content-Type-Options nosniff;
}

location /auth {
    alias   $wwwhisper_root/www_static/auth/;
    charset utf-8;
    add_header X-Frame-Options SAMEORIGIN;
    add_header X-Content-Type-Options nosniff;

    location /auth/not_authorized.html {
        internal;
    }
    location = /auth/login {
      alias $wwwhisper_root/www_static/auth/login.html;
      default_type text/html;
    }
    location = /auth/logout {
      alias $wwwhisper_root/www_static/auth/logout.html;
      default_type text/html;
    }
}
