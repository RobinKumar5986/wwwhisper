<!DOCTYPE html>
<!--
Copyright (C) 2012, 2013 Jan Wrobel

Licensed under the GPL License version 3 or any later version:
https://www.gnu.org/licenses/gpl-3.0.html
-->

<html lang="en">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>wwwhisper: Web Access Control</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="/auth/assets/css/bootstrap.css" rel="stylesheet"
          type="text/css">
    <link href="/admin/admin.css" rel="stylesheet" type="text/css">
  </head>

  <body>

    <div class="navbar navbar-fixed-top navbar-inverse">
      <div class="navbar-inner">
        <div class="container">
          <img src="/auth/assets/img/logo.png" alt="share"
             class="logo">
          <a class="brand" href="#">
            Access control for <span class='locations-root'></span>
          </a>
        </div>
      </div>
    </div>

    <div class="container content">
      <div class="alert alert-success help-message fade in hide">
        <!-- <a class="close"  href="#" data-dismiss="alert">&times;</a> -->
        <p>
          Left side: paths on <span class='locations-root'></span>
          to which access can be granted. <br />
          Right side: emails of users that can access a select path
          (enter * to allow everyone access without login;
           enter *? to allow everyone access but still require login).
        </p>

        <p>
          Granting access to a path gives also access to all
          sub-paths unless a more specific access control rule is
          defined.  The more specific rule overwrites a more generic
          one.  <!--For example, if a user is on a list granting
          access to /foo she can access /foo/bar but if there is more
          specific access control list for /foo/baz and the user is
          not on this list, she can't access anything under
          /foo/baz. -->
        </p>

        <p>
        <i class="icon-eye-open icon-light"></i> visit a location in a
        separate tab.  <br />
        <i class="icon-envelope icon-light"></i> compose a notification about a
        shared location.
        <br />
        <i class="icon-remove icon-light"></i> remove an access control
        list for a path (left) or remove a user (right).
        </p>
      </div> <!-- /.alert -->

      <div id="error-box">
        <div class="alert alert-error fade in hide">
           <a class="close" href="#" data-dismiss="alert">&times;</a>
          <div class="alert-message">
          </div>
        </div>  <!-- /.alert -->
      </div>  <!-- /.error-box -->

      <h4>Locations</h4>
      <div class="tabbable tabs-left">

        <ul class="nav nav-tabs span4" id="location-list">
          <li id="location-list-item">
            <a class="url" href="#location-info-list-item" data-toggle="tab">
              <i class="icon-hand-right icon-light invisible can-access"> </i>
              <span class="path"></span>
              <i class="menu-item icon-remove spaced-left remove-location"></i>
              <i class="menu-item icon-envelope notify"></i>
              <i class="menu-item icon-eye-open view-page"></i>
            </a>
          </li>
          <li>

            <div class="input-append" id="add-location">
              <input type="text" placeholder="Enter a path"
                     id="add-location-input" class="stretch">
              <button type="button" class="btn disabled"
                      id="add-location-button">
                <i class="icon-arrow-up icon-light"></i>
              </button>
            </div> <!-- /.input-append -->

          </li>
        </ul>

        <div class="tab-content" id="location-info-list">
          <div class="tab-pane" id="location-info-list-item">

            <div class="row">
              <div class="span4">
                <ul class="allowed-user-list">
                  <li id="allowed-user-list-item">
                    <span class="user-mail"></span>
                    <i class="menu-item icon-remove unshare span1"></i>
                  </li>
                </ul>
              </div> <!-- /.span4 -->
            </div> <!-- /.row -->

            <div class="input-append">
              <input type="text" class="add-allowed-user stretch"
                     placeholder="Enter an email to grant access">
              <button type="button"
                      class="btn disabled add-allowed-user-button">
                <i class="icon-arrow-up icon-light"></i>
              </button>
            </div> <!-- /.input-append -->


          </div> <!-- /.tab-pane -->
        </div> <!-- /.tab-content -->

      </div> <!-- /.tabbable -->

      <div class="alert alert-success help-message fade in hide">
        <p>
          Move a mouse over a user to quickly check which locations the user
          can access (marked with <i class="icon-hand-right icon-light"></i>).
          <br />
          <i class="icon-arrow-up icon-light"></i> grant a user access to
          the currently active location.
          <br />
          <i class="icon-envelope icon-light"></i> compose a notification
          about locations shared with a user.
          <br />
          <i class="icon-remove icon-light"></i> remove a user and disallow
          the removed user access to all locations.
        </p>
      </div>  <!-- /.alert -->

      <h4>Users</h4>
      <div class="row">
        <div class="span4">
          <ul id="user-list">
            <li class="user-list-item">
              <span class="user-mail"> </span>
              <i class="menu-item icon-remove spaced-left remove-user"></i>
              <i class="menu-item icon-envelope notify"></i>
              <i class="menu-item icon-arrow-up share invisible"></i>
            </li>
          </ul>
        </div>  <!-- /.span4 -->
      </div> <!-- /.row -->

      <div class="row">
        <a class="btn btn-info help">Show help</a>
      </div>
    </div> <!-- /.container -->

    <div class="modal hide fade" id="notify-modal">
      <div class="modal-header">
        <a class="close" data-dismiss="modal">&times;</a>
        <h4>Email invitation</h4>
      </div>
      <div class="modal-body">
        <form class="form-horizontal in-dialog">
          <div class="control-group">
            <label class="control-label" for="notify-to">To</label>
            <div class="controls">
              <input type="text" class="input-xlarge input-wide" id="notify-to"
                     value="jimi@example.com">
            </div>
            <label class="control-label" for="notify-subject">Subject</label>
            <div class="controls">
              <input type="text" class="input-xlarge input-wide"
                     id="notify-subject" value="Invitation">
            </div>
          </div>
          <div class="control-group">
            <div class="controls">
              <textarea class="input-xlarge input-wide" id="notify-body"
                        rows="7">
              </textarea>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <a href="#" class="btn btn-primary" id="send" target="_blank">
        Launch email client
        </a>
        <a href="#" class="btn" data-dismiss="modal">Cancel</a>
      </div>
    </div>

    <script type="text/javascript" src="/auth/assets/js/jquery.js">
    </script>
    <script type="text/javascript" src="/auth/assets/js/bootstrap.min.js">
    </script>
    <script type="text/javascript" src="/auth/assets/js/stub.js">
    </script>
    <script type="text/javascript" src="/admin/admin.js">
    </script>
</body>
</html>
